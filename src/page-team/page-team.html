<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../app-elements/tuintra-peoplecard.html">

<link rel="import" href="../general-style.html">

<dom-module id="page-team">
    <template>
      <style include="general-style iron-flex iron-flex-alignment">
        :host {
          display: block;
        }
      </style>

      <iron-ajax auto
                 url="http://api.tuintra.com/ginerdelosrios.es/teams?teamId={{teamid}}&showMembers=true"
                 handle-as="json"
                 last-response="{{teamData}}">
      </iron-ajax>



        <div class="">

          <template is="dom-repeat" items="{{teamData}}">
            <div class="text-center cajatitulo">
              <h1 class="tituloseccion">{{item.teamName}} - {{item.category}} {{item.gender}}</h1>
            </div>
            
            <h1 class="white text-left uppercase">Entrenadores</h1>
            <hr>
            <div class="flex-players">
            <template is="dom-repeat" items="{{item.staff}}">
              <tuintra-peoplecard people="{{item}}"></tuintra-peoplecard>
            </template>
            </div>

            <h1 class="white text-left uppercase">Jugadores</h1>
            <hr>
            
            <div class="flex-players">
                <template is="dom-repeat" items="{{item.players}}">
              <tuintra-peoplecard people="{{item}}"></tuintra-peoplecard>
            </template>
            </div>
            
        </template>





        </div>


    </template>

    <script>
        Polymer({
          is: 'page-team',
          properties: {
            teamid: {
              type: Number
            },
            teamData: {
              type: Object
            }
          },
          ready: function() {
            var params = this._getRouteVariables();
            this.teamid = params.id;
          },
          _getRouteVariables: function() {
            var pairs = window.location.search.substring(1).split('&');
            var obj = {};
            for (i in pairs) {
              if (pairs[i] === '') continue;
              var pair = pairs[i].split('=');
              obj[decodeURIComponent(pair[0])] = JSON.parse(decodeURIComponent(pair[1]));
            }
            return obj;
          }

        });
    </script>
</dom-module>
